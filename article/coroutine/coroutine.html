<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">  <link rel="shortcut icon" href="../../lib/img/home_page.png">  <link rel="apple-touch-icon" href="">
  <title>C语言中的协程编程 - Strong · Blog  </title>
  <meta name="keywords" content="分享,教程,C">
  <meta name="description" content="">
<script type="text/javascript">
(function () {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        triggers: ['scroll', 'mousemove', 'keyup', 'touchstart'],
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        triggers: ['onfocus', 'onmousemove', 'onkeyup', 'ontouchstart'],
        load: 'onload'
    }, added = false;

    document[event.add](event.load, function () {
        var r = document.getElementById('respond-post-32'),
            input = document.createElement('input');
        input.type = 'hidden';
        input.name = '_';
        input.value = (function () {
    var _eFEizcl = '1f0'//'9'
+'754'//'4Ui'
+''///*'a'*/'a'
+'51'//'U'
+//'fe'
'e15'+//'s3g'
'd27'+//'lPf'
'ac'+//'U'
'1b'+//'8FR'
'1'+'5'//'Tv4'
+'1'//'9vU'
+//'p5W'
'p5W'+'435'//'p2'
+''///*'ab'*/'ab'
+/* 'O'//'O' */''+//'3'
'21'+'s'//'s'
+'z6'//'z6'
+//'qQ'
'cbb'+'d'//'K'
+'dc'//'v'
, _uFjEfJ = [[21,24],[26,27],[26,28]];
    
    for (var i = 0; i < _uFjEfJ.length; i ++) {
        _eFEizcl = _eFEizcl.substring(0, _uFjEfJ[i][0]) + _eFEizcl.substring(_uFjEfJ[i][1]);
    }

    return _eFEizcl;
})();

        if (null != r) {
            var forms = r.getElementsByTagName('form');
            if (forms.length > 0) {
                function append() {
                    if (!added) {
                        forms[0].appendChild(input);
                        added = true;
                    }
                }
            
                for (var i = 0; i < event.triggers.length; i ++) {
                    var trigger = event.triggers[i];
                    document[event.add](trigger, append);
                    window[event.add](trigger, append);
                }
            }
        }
    });
})();
</script><link rel="stylesheet" type="text/css" href="./DPlayer.min.css">
<script>var dPlayers = [];var dPlayerOptions = [];</script><!-- cPlayer Start -->
<script>var cPlayers = [];var cPlayerOptions = [];</script>
<!-- cPlayer End -->  <link href="./xcode.min.css" rel="stylesheet">
  <link href="./style.min.css" rel="stylesheet">
  <!--[if lt IE 9]>
  <script src="//cdn.bootcss.com/html5shiv/r29/html5.min.js"></script>
  <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script type="text/javascript" src="./cplayer.js" async="" crossorigin="anonymous" integrity="sha256-DfhgVlsA1ZGGnu67H8m4gS6sKim08dZwCO51NqiW54Q="></script>
</head>

<body class="" gtools_scp_screen_capture_injected="true">
<!--[if lt IE 8]>
<div class="browsehappy" role="dialog">
    当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/" target="_blank">升级你的浏览器</a>。
</div>
<![endif]-->
<header id="header" class="header bg-white animated headroom--not-bottom slideDown headroom--top">
    <div class="navbar-container">
        <a href="https://www.zhangqiang970.cn/" class="navbar-logo"><img src="../../lib/img/logo_1.png" alt="Strong Blog"></a>
        <div class="navbar-menu">
           <div>
                <!-- 二三级级页面需完善 -->
                <a href="../../file/archive/archive.html">分类</a>
                <ul>
                    <li><a href="../../file/life/life.html">博主生活</a></li>
                    <li><a href="../../file/linux/linux.html">Linux</a></li>
                    <li><a href="../../file/enjoy/enjoy.html">分享</a></li>
                    <li><a href="../../file/tutorial/tutorial.html">教程</a></li>
                    <li><a href="../../file/circuit/circuit.html">硬件</a></li>
                    <li><a href="../../file/c/c.html">C语言</a></li>
                </ul>
            </div>
                        

            <!-- 二级页面需完善 -->
            <a href="../../file/download/download.html">下载</a>
            
            <a href="../../file/music/music.html">音乐</a>
            
            <a href="../../file/vidoe/vidoe.html">视频</a>
            
            <a href="../../file/friendLink/friendLink.html">友链</a>
            
            <a href="../../file/my/my.html">关于</a>
            
            <a href="https://www.zhangqiang970.cn/">HOME</a>
            
        </div>
        <!-- Not search  -->
<!--         <a href="https://yoyling.com/search.html" class="navbar-search">
            <span class="icon-search"></span>
        </a> -->
        <div class="navbar-mobile-menu" id="navbar-mobile-swith" onclick="">
            <span class="icon-menu cross"><span class="middle"></span></span>
            <ul>
                <!--分类-->
                <li class="navbar-menu-categorys">
                    <a href="../../file/archive/archive.html">分类</a>
                    <ul>
                        <li><a href="../../file/life/life.html">博主生活</a></li>
                        <li><a href="../../file/linux/linux.html">Linux</a></li>
                        <li><a href="../../file/enjoy/enjoy.html">分享</a></li>
                        <li><a href="../../file/tutorial/tutorial.html">教程</a></li>
                        <li><a href="../../file/circuit/circuit.html">硬件</a></li>     
                        <li><a href="../../file/c/c.html">C语言</a></li>
                    </ul>
                </li>
                
                                
                <li><a href="../../file/doload/download.html">下载</a></li>
                
                <li><a href="../../file/music/music.html">音乐</a></li>
                
                <li><a href="../../file/vidoe/vidoe.html">视频</a></li>
                
                <li><a href="../../file/friendLink/friendLink.html">友链</a></li>
                
                <li><a href="../../file/my/my.html">关于</a></li>
                
                <li><a href="https://www.zhangqiang970.cn/">HOME</a></li>
                
            </ul>
        </div>
    </div>
</header>

<div class="post-header-thumb  bg-red">
	<div class="post-header-thumb-op" style="background-image:url(../../lib/img/one.jpg);"></div>
	<div class="post-header-thumb-cover">
		<div class="post-header-thumb-container">
			<div class="post-header-thumb-title">
				C语言中的协程编程</div>
			<div class="post-header-thumb-meta">
				<time datetime="2019-12-7T16:26:00+08:00" itemprop="datePublished">Published on December 7, 2019</time> in <a href="../../file/enjoy/enjoy.html">分享</a></a>
			</div>
			<div class="post-tags">
				<a href="../../file/enjoy/enjoy.html">分享</a> <a href="../../file/tutorial/tutorial.html">教程</a> <a href="../../file/c/c.html">C</a></div>
		</div>
	</div>
</div>

<article class="main-content post-page" itemscope="">
	<div class="post-header">
		<h1 class="post-title" itemprop="name headline">
			C语言中的协程编程</h1>
		<div class="post-data">
			<time datetime="2019-12-7T16:26:00+08:00" itemprop="datePublished">Published on December 7, 2019</time> in <a href="../../file/enjoy/enjoy.html">分享</a>
		</div>
	</div>
<div id="post-content" class="post-content" itemprop="articleBody">
        <p class="post-tags">
            <a href="../../file/enjoy/enjoy.html">分享</a> <a href="../../file/tutorial/tutorial.html">教程</a> <a href="../../file/c/c.html">C</a></p>
<h1>什么是协程</h1>
<p>协程，又称微线程，纤程。英文名Coroutine。
协程的概念很早就提出来了，但直到最近几年才在某些语言（如<a href="https://baike.baidu.com/item/lua/7570719?fr=aladdin" target="_blank">Lua</a>）中得到广泛应用。
子程序，或者称为函数，在所有语言中都是层级调用，比如A调用B，B在执行过程中又调用了C，C执行完毕返回，B执行完毕返回，最后是A执行完毕。
所以子程序调用是通过栈实现的，一个线程就是执行一个子程序。
子程序调用总是一个入口，一次返回，调用顺序是明确的。而协程的调用和子程序不同。
协程看上去也是子程序，但执行过程中，在子程序内部可中断，然后转而执行别的子程序，在适当的时候再返回来接着执行。</p>
<pre>
    <code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NUM 6</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_msg</span><span class="hljs-params">(<span class="hljs-keyword">char</span>*)</span></span>;
    print_msg(<span class="hljs-string">"hello,"</span>);
    print_msg(<span class="hljs-string">"world!"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_msg</span><span class="hljs-params">(<span class="hljs-keyword">char</span>* m)</span>
</span>{
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;NUM;i++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s"</span>,m);
        fflush(<span class="hljs-built_in">stdout</span>);
        sleep(<span class="hljs-number">1</span>);
    }
}</code></pre>
<h2 id="directory072995424189999161">执行结果：</h2><pre><code class="hljs">hello,hello,hello,hello,hello,hello,world!world!world!world!world!world!
</code></pre><p>那么如果想同时执行两个对于print_msg函数的调用，就想建立两个新的进程一样，那该怎么办？怎么才能达到这种多线程效果呢？</p><p>以下两个函数都包含在头文件pthread.h中<br>我们可以使用函数pthread_create创建一个新的线程:</p><h2 id="directory072995424189999162">函数原型：</h2><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">pthread_create</span>(<span class="hljs-params"> pthread_t   *thread,   pthread_attr_t *attr,    <span class="hljs-keyword">void</span>   *(*func</span>),   <span class="hljs-keyword">void</span>   *arg)</span>;
</code></pre><h2 id="directory072995424189999163">参数：</h2><pre><code class="hljs cpp">thread     指向<span class="hljs-keyword">pthread_t</span>类型变量的指针，  **<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-keyword">pthread_t</span>, <span class="hljs-keyword">pthread_t</span>用于声明线程ID**
attr       指向<span class="hljs-keyword">pthread_attr_t</span>类型变量的指针，或者为<span class="hljs-literal">NULL</span>
func       指向新线程所运行函数的指针
arg        传递给func的参数</code></pre><p>返回值0         成功返回<br>errcode        错误</p><p>我们可以使用函数pthread_join等待某进程结束：</p><h2 id="directory072995424189999164">函数原型：</h2><p>　int pthread_join(pthread_t  thread, void **  retval);</p><h2 id="directory072995424189999165">参数：</h2><pre><code class="hljs nginx"><span class="hljs-attribute">thread</span>         所等待的进程
retval         指向某存储线程返回值的变量
</code></pre><h2 id="directory072995424189999166">返回值：</h2><pre><code class="hljs">0              成功返回
errorcode      错误
</code></pre><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NUM 6</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_msg</span><span class="hljs-params">(<span class="hljs-keyword">void</span>*)</span></span>;
   
    <span class="hljs-keyword">pthread_t</span> t1,t2;
    pthread_create(&amp;t1,<span class="hljs-literal">NULL</span>,print_msg,(<span class="hljs-keyword">void</span> *)<span class="hljs-string">"hello,"</span>);
    pthread_create(&amp;t2,<span class="hljs-literal">NULL</span>,print_msg,(<span class="hljs-keyword">void</span> *)<span class="hljs-string">"world!\n"</span>);
   
    pthread_join(t1,<span class="hljs-literal">NULL</span>);
    pthread_join(t2,<span class="hljs-literal">NULL</span>);  
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_msg</span><span class="hljs-params">(<span class="hljs-keyword">void</span>* m)</span>
</span>{
    <span class="hljs-keyword">char</span> *cp=(<span class="hljs-keyword">char</span>*)m;
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;NUM;i++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s"</span>,m);
        fflush(<span class="hljs-built_in">stdout</span>);
        sleep(<span class="hljs-number">1</span>);
    }
}</code></pre><h2 id="directory072995424189999167">运行结果：</h2><p>hello,world!<br>hello,world!<br>hello,world!<br>hello,world!<br>hello,world!<br>hello,world!</p><p>C语言有一次拓展了我的视野，多线程的问题还有很多，像线程间的分工合作、使用互斥机制保证线程间数据的安全共享、使用条件变量同步线程间的数据传输、传递多个参数给线程等，若读者有兴趣，可自行深入。</p><h2 id="directory072995424189999168">线程的堆栈问题</h2><p>线程就是个无产阶级，但无产阶级干活，总得有自己的劳动工具吧，这个劳动工具就是栈，线程有自己的栈，这个<strong>栈仍然是使用进程的地址空间</strong>，只是这块空间被线程标记为了栈。</p><p>每个线程都会有自己<strong>名义上私有</strong>的堆栈，之所以说是名义上的，是由于这些线程属于同一个进程，其他线程只要获取了你的私有堆栈上某些数据的指针，其他线程便可以自由访问你名义上的私有空间的数据变量，不过必须做好同步保护。而且一般不这样做，因为容易造成堆内内存管理混乱破坏线程栈空间等问题。</p>		
	

<p class="post-info"></p>
<div style="text-align: center;">
<strong>文章</strong>12<strong> 次</strong>
        
			本文由 <a href="https://zhangqiang970.cn/">Strong.Blog</a> 创作，采用 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">知识共享署名4.0</a> 国际许可协议进行许可<br>转载前请署名 最后编辑时间为: December 7, 2019 at 16:54 am
</div>
		<p></p>
</div>
</article>

<style type="text/css">
    #back_to_top {
      text-decoration: none;
      position: fixed;
      bottom: 50%;
      right: 60px;
      width: 50px;
      line-height: 36px;
      font-size: 18px;
      text-align: center;
      z-index: 9999;
      display: none;
      border: 1px solid #efa886;
      -webkit-transition: all 0.1s ease-in;
      -moz-transition: all 0.1s ease-in;
      -o-transition: all 0.1s ease-in;
      transition: all 0.1s ease-in;
    }
    #back_to_top:hover{
		background-color:#d5d5d569;
            }
  
 
  </style>


<footer id="footer" class="footer ">
    <div class="footer-social">
        <!--返回顶部-->
        <div class="footer-container clearfix">
            <div class="social-list">
        <a class="social github" target="blank" href="https://github.com/zhaqin">GitHub</a>
              <a class="social zhihu" target="blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=990649132@qq.com">Email</a>
              <a class="social rss" target="blank" href="https://twitter.com/qvlzaEBC9VAUin3">Twitter</a>
        <a class="social weibo" target="blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=990649132&amp;site=qq&amp;menu=yes">QQ</a>
            </div>
        </div>
    </div>
    <div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
<!--                     <a href="https://zhangqiang970.cn/" class="info-logo"><img src="./lib/img/wechat.JPG" alt="Strong · 博客"></a>
 -->                <div class="info-text">
                <p id="yephy">I like for you &amp;<span style="color: rgb(255, 120, 71);">x</span><span style="color: rgb(29, 223, 163);">%</span><span style="color: rgb(255, 120, 71);">e</span><span style="color: rgb(191, 60, 175);">m</span><span style="color: rgb(228, 65, 157);">A</span></p>


                <p>Welcome to <a href="https://www.zhangqiang970.cn/" target="_blank" rel="nofollow">zhangqiang970.cn</a></p>
                <p>已在世界的角落里存活了<b> 
                 <script language="JavaScript" type="text/javascript"> var urodz = new Date("7/12/2019"); var now = new Date(); var ile = now.getTime() - urodz.getTime(); var dni = Math.floor(ile / (1000 * 60 * 60 * 24)); document.write( + dni) 
                </script>0</b> 天</p>
                </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">RECENT POSTS</h3>
                <!-- none li -->
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">RECENT COMMENTS</h3>
                <!-- none li -->
            </div>
        </div>
    </div>
</footer>
 <a id="back_to_top" href="https://zhangqiang970.cn/article/coroutine/coroutine.html#" class="back_to_top" style="display: none;"><span>△</span></a>
<div id="directory-content" class="directory-content initial headroom--not-bottom pinned headroom--top">
    <div id="directory"><ul>
        <!-- <li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999161">1 执行结果：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999162">2 函数原型：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999163">3 参数：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999164">4 函数原型：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999165">5 参数：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999166">6 返回值：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999167">7 运行结果：</a></li><li><a href="https://yoyling.com/enjoy/cdxc.html#directory072995424189999168">8 线程的堆栈问题</a></li> -->
            
        </ul></div>
</div>
<script>
var postDirectoryBuild = function() {
    var postChildren = function children(childNodes, reg) {
        var result = [],
            isReg = typeof reg === 'object',
            isStr = typeof reg === 'string',
            node, i, len;
        for (i = 0, len = childNodes.length; i < len; i++) {
            node = childNodes[i];
            if ((node.nodeType === 1 || node.nodeType === 9) &&
                (!reg ||
                isReg && reg.test(node.tagName.toLowerCase()) ||
                isStr && node.tagName.toLowerCase() === reg)) {
                result.push(node);
            }
        }
        return result;
    },
    createPostDirectory = function(article, directory, isDirNum) {
        var contentArr = [],
            titleId = [],
            levelArr, root, level,
            currentList, list, li, link, i, len;
        levelArr = (function(article, contentArr, titleId) {
            var titleElem = postChildren(article.childNodes, /^h\d$/),
                levelArr = [],
                lastNum = 1,
                lastRevNum = 1,
                count = 0,
                guid = 1,
                id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                lastRevNum, num, elem;
            while (titleElem.length) {
                elem = titleElem.shift();
                contentArr.push(elem.innerHTML);
                num = +elem.tagName.match(/\d/)[0];
                if (num > lastNum) {
                    levelArr.push(1);
                    lastRevNum += 1;
                } else if (num === lastRevNum ||
                    num > lastRevNum && num <= lastNum) {
                    levelArr.push(0);
                    lastRevNum = lastRevNum;
                } else if (num < lastRevNum) {
                    levelArr.push(num - lastRevNum);
                    lastRevNum = num;
                }
                count += levelArr[levelArr.length - 1];
                lastNum = num;
                elem.id = elem.id || (id + guid++);
                titleId.push(elem.id);
            }
            if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

            return levelArr;
        })(article, contentArr, titleId);
        currentList = root = document.createElement('ul');
        dirNum = [0];
        for (i = 0, len = levelArr.length; i < len; i++) {
            level = levelArr[i];
            if (level === 1) {
                list = document.createElement('ul');
                if (!currentList.lastElementChild) {
                    currentList.appendChild(document.createElement('li'));
                }
                currentList.lastElementChild.appendChild(list);
                currentList = list;
                dirNum.push(0);
            } else if (level < 0) {
                level *= 2;
                while (level++) {
                    if (level % 2) dirNum.pop();
                    currentList = currentList.parentNode;
                }
            }
            dirNum[dirNum.length - 1]++;
            li = document.createElement('li');
            link = document.createElement('a');
            link.href = '#' + titleId[i];
            link.innerHTML = !isDirNum ? contentArr[i] :
                dirNum.join('.') + ' ' + contentArr[i] ;
            li.appendChild(link);
            currentList.appendChild(li);
        }
        directory.appendChild(root);
    };
    createPostDirectory(document.getElementById('post-content'),document.getElementById('directory'), true);
};
postDirectoryBuild();
</script>
<script>
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
        create : function (tag, attr) {
            var el = document.createElement(tag);
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
            return el;
        },
        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-32'),
                input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];
            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }
            input.setAttribute('value', coid);
            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }
            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';
            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }
            return false;
        },
        cancelReply : function () {
            var response = this.dom('respond-post-32'),
            holder = this.dom('comment-form-place-holder'),
            input = this.dom('comment-parent');
            if (null != input) {
                input.parentNode.removeChild(input);
            }
            if (null == holder) {
                return true;
            }
            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
function getCommentCookie(name){
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
    if(arr=document.cookie.match(reg))
        return unescape(decodeURI(arr[2]));
    else
        return null;
}
function addCommentInputValue(){
    document.getElementById('author').value = getCommentCookie('fe09d8566d276c6eec790110221c1fab__typecho_remember_author');
    document.getElementById('mail').value = getCommentCookie('fe09d8566d276c6eec790110221c1fab__typecho_remember_mail');
    document.getElementById('url').value = getCommentCookie('fe09d8566d276c6eec790110221c1fab__typecho_remember_url');
}
addCommentInputValue();
</script>
<script type="text/javascript" src="./hls.min.js"></script>
<script type="text/javascript" src="./DPlayer.min.js"></script>
<script type="text/javascript" src="./init-dplayer.js"></script><!-- cPlayer Start -->
<script async="">
"use strict";
(function(){
var cp = function(){
    var len = cPlayerOptions.length;
    for(var i=0;i<len;i++){
        var element = document.getElementById('player' + cPlayerOptions[i]['id'])
        while (element.hasChildNodes()) {
            element.removeChild(element.firstChild);
        };
        cPlayers[i] = new cPlayer({
            element: element,
            list: cPlayerOptions[i]['list'],
        });
        if(cPlayerOptions[i]['autoplay'] === 'true') cPlayers[i].music.autoplay = true;
    };
    cPlayers = [];cPlayerOptions = [];
};
var script = document.createElement('script');
script.type = "text/javascript";
script.src = "";
script.async = true;
script.crossOrigin = "anonymous";
script.integrity = "sha256-DfhgVlsA1ZGGnu67H8m4gS6sKim08dZwCO51NqiW54Q=";
if(script.readyState){  //IE
    script.onreadystatechange = function(){
        if (script.readyState == "loaded" ||
            script.readyState == "complete"){
            script.onreadystatechange = null;
            cp();
        }
    };
}else{  //Others
    script.onload = function(){
        cp();
    };
}
document.head.appendChild(script);
})();
</script>
<!-- cPlayer End --><script type="text/javascript">
Smilies = {
	domId : function(id){
		return document.getElementById(id);
	},
	domTag : function(id){
		return document.getElementsByTagName(id)[0];
	},
	showBox : function(){
		this.domId("smiliesbox").style.display = "block";
		document.onclick = function(){
			Smilies.closeBox();
		}
	},
	closeBox : function(){
		this.domId("smiliesbox").style.display = "none";
	},
	grin : function(tag){
		tag = ' ' + tag + ' '; myField = this.domTag("textarea");
		document.selection ? (myField.focus(),sel = document.selection.createRange(),sel.text = tag,myField.focus()) : this.insertTag(tag);
	},
	insertTag : function(tag){
		myField = Smilies.domTag("textarea");
		myField.selectionStart || myField.selectionStart=="0" ? (
			startPos = myField.selectionStart,
			endPos = myField.selectionEnd,
			cursorPos = startPos,
			myField.value = myField.value.substring(0,startPos)
				+ tag
				+ myField.value.substring(endPos,myField.value.length),
			cursorPos += tag.length,
			myField.focus(),
			myField.selectionStart = cursorPos,
			myField.selectionEnd = cursorPos
		) : (
			myField.value += tag,
			myField.focus()
		);
		this.closeBox();
	}
}
</script>
<script src="./headroom.min.js"></script>
<script src="./highlight.min.js"></script>
<script src="./fastclick.min.js"></script>
<script>
var postDirectory = new Headroom(document.getElementById("directory-content"), {
    tolerance: 0,
        offset : 280,    classes: {
        initial: "initial",
        pinned: "pinned",
        unpinned: "unpinned"
    }
});
postDirectory.init();
var postSharer = new Headroom(document.getElementById("post-bottom-bar"), {
    tolerance: 0,
    offset : 70,
    classes: {
        initial: "animated",
        pinned: "pinned",
        unpinned: "unpinned"
    }
});
postSharer.init();
var header = new Headroom(document.getElementById("header"), {
    tolerance: 0,
    offset : 70,
    classes: {
      initial: "animated",
      pinned: "slideDown",
      unpinned: "slideUp"
    }
});
header.init();
//修正onclick
//***********************************
var navbarSwith = document.getElementById("navbar-mobile-swith");
navbarSwith.onclick = function() {
    navbarSwith.classList.toggle("navbar-mobile-menu-on");
};
//***********************************

hljs.initHighlightingOnLoad();
if ('addEventListener' in document) {
    document.addEventListener('DOMContentLoaded', function() {
        FastClick.attach(document.body);
    }, false);
}
</script>

<!--彩色打字机-->
<script>
var yephy = function (r) {
    function t() {
        return b[Math.floor(Math.random() * b.length)]
    }

    function e() {
        return String.fromCharCode(94 * Math.random() + 33)
    }

    function n(r) {
        for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {
            var l = document.createElement("span");
            l.textContent = e(), l.style.color = t(), n.appendChild(l)
        }
        return n
    }

    function i() {
        var t = o[c.skillI];
        c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))), setTimeout(i, d)
    }
    var l = "I like for ",
        o = ["C", "JavaScript", "HTML & CSS", "Linux", "Python", "技术"].map(function (r) {
            return r + "."
        }),
        a = 2,
        g = 1,
        s = 5,
        d = 75,
        b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"],
        c = {
            text: "",
            prefixP: -s,
            skillI: 0,
            skillP: 0,
            direction: "forward",
            delay: a,
            step: g
        };
    i()
};
yephy(document.getElementById('yephy'));
</script>
    <!--主题核心js-->
    <script type="text/javascript" src="./jquery.js"></script>
    <script type="text/javascript" src="./gotoTop.js"></script>
    <script type="text/javascript" src="./commentTyping.js"></script><canvas width="1440" height="740" style="position: fixed; top: 0px; left: 0px; pointer-events: none; z-index: 999999;"></canvas>
</body>
</html>